DROP SCHEMA IF EXISTS imagic CASCADE;

CREATE SCHEMA imagic;

CREATE TABLE imagic.Patient(
	IDPatient INTEGER PRIMARY KEY,
	IACreationDate TIMESTAMP NULL,
	IACreationUser VARCHAR(255) NULL,
	IAModificationDate TIMESTAMP NULL,
	IAModificationUser VARCHAR(255) NULL,
	IAGUID VARCHAR(36) NOT NULL,
	IAOwner VARCHAR(255) NULL,
	IACreatingGroup VARCHAR(890) NULL,
	IAModificationGroup VARCHAR(890) NULL,
	I_PatID VARCHAR(64) NOT NULL,
	I_PatNaFamil VARCHAR(64) NULL,
	I_PatNaGiven VARCHAR(64) NULL,
	I_PatNaMiddl VARCHAR(64) NULL,
	I_PatNaPrefi VARCHAR(64) NULL,
	I_PatNaPostf VARCHAR(64) NULL,
	I_PatSex VARCHAR(890) NULL,
	I_PatBirthDa TIMESTAMP NULL,
	I_PatBirthTi TIMESTAMP NULL,
	I_PatDeathIn INTEGER NULL DEFAULT 0,
	IACounter1 INTEGER NULL DEFAULT -1,
	IACounter2 INTEGER NULL DEFAULT -1,
	IACounter3 INTEGER NULL DEFAULT -1,
	IADeleted SMALLINT NULL DEFAULT 0,
	IAReadOnly SMALLINT NULL DEFAULT 0,
	IASync SMALLINT NULL DEFAULT 0,
	I_PatWeight VARCHAR(16) NULL,
	I_PatComment TEXT NULL,
	I_PatAddress TEXT NULL,
	I_Citizensh VARCHAR(250) NULL,
	I_PhoneNum VARCHAR(250) NULL,
	I_PatCountry VARCHAR(255) NULL,
	I_PatPost VARCHAR(16) NULL,
	I_PatCity VARCHAR(255) NULL,
	I_PatStreet VARCHAR(255) NULL,
	I_PatNaBPo VARCHAR(64) NULL,
	I_PatNaBPr VARCHAR(64) NULL,
	I_PatNaBMi VARCHAR(64) NULL,
	I_PatNaBGi VARCHAR(64) NULL,
	I_PatNaBirth VARCHAR(64) NULL,
	I_PatSexC VARCHAR(16) NULL
);

CREATE TABLE imagic.Visit(
	IDVisit INTEGER PRIMARY KEY,
	IDPatient INTEGER NOT NULL,
	IACreationDate TIMESTAMP NULL,
	IACreationUser VARCHAR(255) NULL,
	IAModificationDate TIMESTAMP NULL,
	IAModificationUser VARCHAR(255) NULL,
	IAGUID VARCHAR(36) NOT NULL,
	IAOwner VARCHAR(255) NULL,
	IACreatingGroup VARCHAR(890) NULL,
	IAModificationGroup VARCHAR(890) NULL,
	I_VisitID VARCHAR(255) NOT NULL,
	I_PatClass VARCHAR(64) NULL,
	I_PatLocatio VARCHAR(80) NULL,
	I_PatLocPrio VARCHAR(80) NULL,
	I_ServFacili VARCHAR(80) NULL,
	I_AdmissionT VARCHAR(64) NULL,
	I_ContractCo VARCHAR(64) NULL,
	I_AdmitDateT TIMESTAMP NULL,
	I_DischDispo VARCHAR(255) NULL,
	I_DischDateT TIMESTAMP NULL,
	I_VisitComm VARCHAR(255) NULL,
	I_CancelFlag INTEGER NULL DEFAULT 0,
	IACounter1 INTEGER NULL DEFAULT -1,
	IACounter2 INTEGER NULL DEFAULT -1,
	IADeleted SMALLINT NULL DEFAULT 0,
	IAReadOnly SMALLINT NULL DEFAULT 0,
	IASync SMALLINT NULL DEFAULT 0,
	I_PatLocHist TEXT NULL,
	I_Diagnosis TEXT NULL,
	I_Procedures TEXT NULL,
	I_DischDispC VARCHAR(255) NULL,
	I_PatClassC VARCHAR(64) NULL,
	I_AdmissionC VARCHAR(64) NULL
);

CREATE TABLE imagic.Study(
	IDStudy INTEGER PRIMARY KEY,
	IDVisit INTEGER NOT NULL,
	IACreationDate TIMESTAMP NULL,
	IACreationUser VARCHAR(255) NULL,
	IAModificationDate TIMESTAMP NULL,
	IAModificationUser VARCHAR(255) NULL,
	IAGUID VARCHAR(36) NOT NULL,
	IAOwner VARCHAR(255) NULL,
	IACreatingGroup VARCHAR(890) NULL,
	IAModificationGroup VARCHAR(890) NULL,
	I_StudyID VARCHAR(16) NOT NULL,
	I_StudyInstU VARCHAR(64) NULL,
	I_StudyDate TIMESTAMP NULL,
	I_StudyTime TIMESTAMP NULL,
	I_RefPhysiFa VARCHAR(64) NULL,
	I_RefPhysiGi VARCHAR(64) NULL,
	I_RefPhysiMi VARCHAR(64) NULL,
	I_RefPhysiPr VARCHAR(64) NULL,
	I_RefPhysiPo VARCHAR(64) NULL,
	I_AccessionN VARCHAR(16) NULL,
	I_StudyDescr VARCHAR(64) NULL,
	I_Facility1 VARCHAR(255) NULL,
	I_Facility2 VARCHAR(255) NULL,
	I_Facility3 VARCHAR(255) NULL,
	I_Facility4 VARCHAR(255) NULL,
	I_Person1 VARCHAR(255) NULL,
	I_Person2 VARCHAR(255) NULL,
	I_Person3 VARCHAR(255) NULL,
	I_Person4 VARCHAR(255) NULL,
	I_DiagCode1 VARCHAR(64) NULL,
	I_DiagCode2 VARCHAR(64) NULL,
	I_DiagCode3 VARCHAR(64) NULL,
	I_DiagCode4 VARCHAR(64) NULL,
	I_DiagText1 VARCHAR(255) NULL,
	I_DiagText2 VARCHAR(255) NULL,
	I_DiagText3 VARCHAR(255) NULL,
	I_DiagText4 VARCHAR(255) NULL,
	I_DiagTyp1 VARCHAR(64) NULL,
	I_DiagTyp2 VARCHAR(64) NULL,
	I_DiagTyp3 VARCHAR(64) NULL,
	I_DiagTyp4 VARCHAR(64) NULL,
	I_ProcCode1 VARCHAR(64) NULL,
	I_ProcCode2 VARCHAR(64) NULL,
	I_ProcCode3 VARCHAR(64) NULL,
	I_ProcCode4 VARCHAR(64) NULL,
	I_ProcText1 VARCHAR(255) NULL,
	I_ProcText2 VARCHAR(255) NULL,
	I_ProcText3 VARCHAR(255) NULL,
	I_ProcText4 VARCHAR(255) NULL,
	I_ProcTyp1 VARCHAR(64) NULL,
	I_ProcTyp2 VARCHAR(64) NULL,
	I_ProcTyp3 VARCHAR(64) NULL,
	I_ProcTyp4 VARCHAR(64) NULL,
	I_Datetime1 TIMESTAMP NULL,
	I_Datetime2 TIMESTAMP NULL,
	I_Datetime3 TIMESTAMP NULL,
	I_Datetime4 TIMESTAMP NULL,
	IACounter1 INTEGER NULL DEFAULT -1,
	IADeleted SMALLINT NULL DEFAULT 0,
	IAReadOnly SMALLINT NULL DEFAULT 0,
	I_CancelInf VARCHAR(255) NULL,
	IASync SMALLINT NULL DEFAULT 0,
	I_StudyIDext VARCHAR(64) NULL,
	I_Sample VARCHAR(255) NULL,
	XML_AsyncInf VARCHAR(64) NULL,
	I_Facility5 VARCHAR(255) NULL,
	I_Facility6 VARCHAR(255) NULL,
	I_FacilityC5 VARCHAR(64) NULL,
	I_FacilityC6 VARCHAR(64) NULL,
	XML_Status VARCHAR(64) NULL,
	I_FacilityC1 VARCHAR(64) NULL,
	I_FacilityC2 VARCHAR(64) NULL,
	I_FacilityC3 VARCHAR(64) NULL,
	I_FacilityC4 VARCHAR(64) NULL,
	I_Comment TEXT NULL,
	I_Diagnosis_S1 TEXT NULL,
	I_Procedures_1 TEXT NULL,
	I_Note TEXT NULL,
	I_Localisatio1 TEXT NULL
);

CREATE TABLE imagic.Image(
	IDImage INTEGER PRIMARY KEY,
	IDStudy INTEGER NOT NULL,
	IACreationDate TIMESTAMP NULL,
	IACreationUser VARCHAR(255) NULL,
	IAModificationDate TIMESTAMP NULL,
	IAModificationUser VARCHAR(255) NULL,
	IAGUID VARCHAR(36) NOT NULL,
	IAOwner VARCHAR(255) NULL,
	IACreatingGroup VARCHAR(890) NULL,
	IAModificationGroup VARCHAR(890) NULL,
	I_ImageID VARCHAR(255) NOT NULL,
	I_Modality VARCHAR(16) NULL,
	I_SeriesInst VARCHAR(64) NULL,
	I_SeriesNumb VARCHAR(12) NULL,
	I_SeriesDesc VARCHAR(64) NULL,
	I_SeriesDate TIMESTAMP NULL,
	I_SeriesTime TIMESTAMP NULL,
	I_PerfPhysiF VARCHAR(64) NULL,
	I_PerfPhysiG VARCHAR(64) NULL,
	I_PerfPhysiM VARCHAR(64) NULL,
	I_PerfPhysiP VARCHAR(64) NULL,
	I_PerfPhysiO VARCHAR(64) NULL,
	I_OperatorsF VARCHAR(64) NULL,
	I_OperatorsG VARCHAR(64) NULL,
	I_OperatorsM VARCHAR(64) NULL,
	I_OperatorPr VARCHAR(64) NULL,
	I_OperatorPo VARCHAR(64) NULL,
	I_PatientPos VARCHAR(16) NULL,
	I_Manufact VARCHAR(64) NULL,
	I_ManufacMod VARCHAR(64) NULL,
	I_ImageTypPD VARCHAR(890) NULL,
	I_ImageTypPE VARCHAR(890) NULL,
	I_Acquisitio TIMESTAMP NULL,
	I_ContentDa TIMESTAMP NULL,
	I_ContentTi TIMESTAMP NULL,
	I_Conversion VARCHAR(16) NULL,
	I_InstanceNu VARCHAR(12) NULL,
	I_SOPClaUID VARCHAR(64) NULL,
	I_SOPInstUID VARCHAR(64) NULL,
	I_TransferSy VARCHAR(64) NULL,
	I_PhotoInter VARCHAR(16) NULL,
	I_NumberOfFr INTEGER NULL DEFAULT 0,
	I_Rows INTEGER NULL DEFAULT 0,
	I_Columns INTEGER NULL DEFAULT 0,
	I_BitsAlloc INTEGER NULL DEFAULT 0,
	I_BitsStored INTEGER NULL DEFAULT 0,
	I_SCDate TIMESTAMP NULL,
	I_SCTime TIMESTAMP NULL,
	I_StoreToPAC INTEGER NULL DEFAULT -1,
	I_StoredInP TIMESTAMP NULL,
	I_CommitedFP TIMESTAMP NULL,
	I_SampelsPP INTEGER NULL DEFAULT 0,
	I_PlanarCfg INTEGER NULL DEFAULT 0,
	I_HighBit INTEGER NULL DEFAULT 0,
	I_PixelRepr INTEGER NULL DEFAULT 0,
	I_PatOrient VARCHAR(890) NULL,
	Im_FolderIndex INTEGER NULL DEFAULT 1,
	Im_IDMeasurement INTEGER NULL,
	Im_FileName VARCHAR(255) NULL,
	Im_NetDriveName VARCHAR(255) NULL,
	Im_VolumeLabel VARCHAR(255) NULL,
	Im_VolumeType INTEGER NULL,
	Im_FileSize INTEGER NULL,
	Im_FileDate TIMESTAMP NULL,
	Im_Name VARCHAR(255) NULL,
	Im_Format INTEGER NULL,
	Im_FormatOptionText VARCHAR(255) NULL,
	Im_FormatOption INTEGER NULL,
	Im_Width INTEGER NULL,
	Im_Height INTEGER NULL,
	Im_BitsPerPixel INTEGER NULL,
	Im_InsertionDate TIMESTAMP NULL,
	Im_InsertionUser VARCHAR(255) NULL,
	Im_ModificationDate TIMESTAMP NULL,
	Im_ModificationUser VARCHAR(255) NULL,
	Im_ComputerSource VARCHAR(255) NULL,
	Im_SourceName VARCHAR(255) NULL,
	Im_SourceWidth INTEGER NULL,
	Im_SourceHeight INTEGER NULL,
	Im_SourceXRatio NUMERIC NULL,
	Im_SourceYRatio NUMERIC NULL,
	Im_MicID INTEGER NULL,
	Im_MicName VARCHAR(255) NULL,
	Im_MicObjID INTEGER NULL,
	Im_MicObjPos INTEGER NULL,
	Im_MicObjName VARCHAR(255) NULL,
	Im_MicObjMagnification NUMERIC NULL,
	Im_MicOptID INTEGER NULL,
	Im_MicOptPos INTEGER NULL,
	Im_MicOptName VARCHAR(255) NULL,
	Im_MicOptMagnification NUMERIC NULL,
	Im_MicXPos NUMERIC NULL,
	Im_MicYPos NUMERIC NULL,
	Im_MicZPos NUMERIC NULL,
	Im_MicFlags INTEGER NULL,
	Im_Flags INTEGER NULL DEFAULT 0,
	Im_XMeterPerPixel NUMERIC NULL DEFAULT 0.0,
	Im_YMeterPerPixel NUMERIC NULL DEFAULT 0.0,
	Im_CalibrationName VARCHAR(255) NULL,
	Im_ScrMode INTEGER NULL,
	Im_ScrKey VARCHAR(255) NULL,
	Im_ImageOrigin VARCHAR(255) NULL,
	Im_OrigCheckHash VARCHAR(255) NULL,
	Im_PositionCounter INTEGER NULL,
	IADeleted SMALLINT NULL DEFAULT 0,
	IAReadOnly SMALLINT NULL DEFAULT 0,
	I_BodyPartEx VARCHAR(890) NULL,
	I_Laterality VARCHAR(890) NULL,
	Im_DownloadCount INTEGER NULL DEFAULT 0,
	IASync SMALLINT NULL DEFAULT 0,
	Im_OriginalFilename VARCHAR(255) NULL,
	Im_imsServerID VARCHAR(36) NULL,
	I_ImgSample VARCHAR(255) NULL,
	XML_Flagext INTEGER NULL DEFAULT -2,
	XML_F_Relevant INTEGER NULL DEFAULT -1,
	SortperStudy VARCHAR(255) NULL,
	GSD_A_Zeit TIMESTAMP NULL,
	GSD_A_Region VARCHAR(255) NULL,
	GSD_A_Art VARCHAR(255) NULL,
	GSD_A_Para VARCHAR(255) NULL,
	GSD_A_Loka VARCHAR(255) NULL,
	EXIF_DateTime1 TIMESTAMP NULL,
	I_ImageComm TEXT NULL,
	Im_CoordLong NUMERIC NULL,
	Im_CoordLat NUMERIC NULL,
	Im_ImsFileType VARCHAR(30) NULL,
	C_Bildlokal VARCHAR(890) NULL,
	I_FailedStore1 TIMESTAMP NULL,
	I_FailStoInP TIMESTAMP NULL,
	Im_FrameRate NUMERIC NULL,
	I_DevAcDate TIMESTAMP NULL,
	I_AcquisiDa TIMESTAMP NULL,
	I_AcquisiTi TIMESTAMP NULL
);
create index if not exists ix_iamodificationdate_image on imagic.image(iamodificationdate);
create index if not exists ix_iamodificationdate_visit on imagic.visit (iamodificationdate);
create index if not exists ix_iamodificationdate_study on imagic.study (iamodificationdate);
create index if not exists ix_iamodificationdate_patient on imagic.patient (iamodificationdate);


create index if not exists ix_iacreationdate_image on imagic.image(iacreationdate);
create index if not exists ix_iacreationdate_visit on imagic.visit (iacreationdate);
create index if not exists ix_iacreationdate_study on imagic.study (iacreationdate);
create index if not exists ix_iacreationdate_patient on imagic.patient (iacreationdate);
